/*
 * Webtags v0.4.1-pl, Dashboard for webtags v1.0.10-pl 
 * Webtags GitHub page (source code and links): https://github.com/earthperson/Webtags
 * Webtags site: http://earthperson.github.io/Webtags/
 * Dashboard for webtags: http://earthperson.github.io/Webtags/dashboard/
 * Author website: http://earthperson.info
 * 
 * Copyright (c) 2013 Dmitry Ponomarev (email: ponomarev.dev@gmail.com) 
 * Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
 */
function Webtags(c){if(c instanceof Object&&c.items){for(var b in c){this.properties[b]=c[b]}this.canvas.render()}}Webtags.prototype.properties={};Webtags.prototype.canvas=null;(function(b){function a(){var g={id:"webtags",type:"rounded",width:500,height:350,border:true,donate:false,grid:false,style:{border:"1px solid #5e8cc2"}},f;for(f in g){this.properties[f]=g[f]}}a.prototype=new b();a.prototype.items=[];a.prototype.hover=null;a.POWERED_BY={LABEL:"Powered by Webtags v0.4.1-pl",URL:"https://github.com/earthperson/Webtags",FONT:"10px Helvetica"};a.prototype.poweredBy={x:null,y:null};a.DONATE_LINK={LABEL:"Donate...",URL:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=RTRX3BMMVP3L8",FONT:"10px Helvetica"};a.prototype.donateLink={width:null,y:null};a.prototype.element=null;a.prototype.getMousePosition=function(f,h){var g=f.getBoundingClientRect();return{x:h.clientX-g.left,y:h.clientY-g.top}};a.prototype.onMousemove=function(h){var k=a.prototype.getMousePosition(a.prototype.element,h),f=k.x,j=k.y,g,i;document.body.style.cursor=a.prototype.hover=null;for(g in a.prototype.items){i=a.prototype.items[g].text;if(f>=parseInt(i.x+i.translating.x)&&f<=(parseInt(i.x+i.translating.x)+parseInt(i.width))&&j>=parseInt(i.y+i.translating.y)&&j<=(parseInt(i.y+i.translating.y)+parseInt(i.height))){document.body.style.cursor="pointer";a.prototype.hover=a.prototype.items[g].item.url;break}}if(a.prototype.properties.border){i=a.prototype.poweredBy;if(f>=i.x&&f<=a.prototype.properties.width&&j>=i.y-1&&j<=a.prototype.properties.height){document.body.style.cursor="pointer";a.prototype.hover=a.POWERED_BY.URL}}if(a.prototype.properties.donate){i=a.prototype.donateLink;if(f>=0&&f<=i.width&&j>=i.y-1&&j<=a.prototype.properties.height){document.body.style.cursor="pointer";a.prototype.hover=a.DONATE_LINK.URL}}};a.prototype.onClick=function(f){if(a.prototype.hover){window.open(a.prototype.hover)}};a.prototype.render=function(){var g=a.prototype.element=document.getElementById(this.properties.id);g.width=this.properties.width;g.height=this.properties.height;g.style.border=this.properties.border||this.properties.donate?this.properties.style.border:"none";if(g.getContext){var j=g.getContext("2d"),h=0,f=this.properties.items.length;j.clearRect(0,0,g.width,g.height);d.prototype.count=0;d.prototype.line={width:0,count:0};g.addEventListener("mousemove",a.prototype.onMousemove,false);g.addEventListener("click",a.prototype.onClick,false);for(;h<f;h++){a.prototype.items.push(new (this.properties.type=="square"?c:e)(j,this.properties.items[h]))}j.fillStyle=this.properties.style.border.match(/#\w{3,}$/)||"#5e8cc2";if(this.properties.border){j.font=a.POWERED_BY.FONT;this.poweredBy.x=parseInt(a.prototype.properties.width-j.measureText(a.POWERED_BY.LABEL).width);this.poweredBy.y=parseInt(a.prototype.properties.height-parseInt(a.POWERED_BY.FONT));j.fillText(a.POWERED_BY.LABEL,this.poweredBy.x,this.poweredBy.y-1)}if(this.properties.donate){j.font=a.DONATE_LINK.FONT;this.donateLink.width=parseInt(j.measureText(a.DONATE_LINK.LABEL).width);this.donateLink.y=parseInt(a.prototype.properties.height-parseInt(a.DONATE_LINK.FONT));j.fillText(a.DONATE_LINK.LABEL,1,this.donateLink.y-1)}}else{}};a.prototype.toString=function(){this.render()};function d(){}d.prototype.properties={width:100,height:40,context:{fillStyle:"#5e8cc2",textBaseline:"top",font:"12px Arial",strokeStyle:"#5e8cc2",lineWidth:2,lineJoin:"round",lineCap:"round",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:2,shadowColor:"rgba(54, 111, 179, 0.4)"}};d.prototype.context=null;d.prototype.item=null;d.prototype.text=null;d.prototype.getRandomFactor=function(){return(Math.random()*10)+1};d.prototype.offsetX=function(){var f=d.prototype.properties.width+this.edgeWidth();return parseFloat((this.count%Math.floor(a.prototype.properties.width/f))*f)};d.prototype.offsetY=function(){var f=d.prototype.properties.width+this.edgeWidth();return Math.floor(this.count/Math.floor(a.prototype.properties.width/f))*d.prototype.properties.height};d.prototype.translateX=function(){if(this.line.width+this.text.width>(a.prototype.properties.width-this.edgeWidth())){this.line.width=0;this.line.count++;return 0}else{return this.line.width}};d.prototype.edgeWidth=function(){return a.prototype.properties.type=="rounded"?32+16+2:16+23+2};d.prototype.translateY=function(){return d.prototype.properties.height*d.prototype.line.count};d.prototype.render=function(){var g=this.getRandomFactor(),h=a.prototype.properties,f;if(h.tag instanceof Object){for(f in h.tag){if(f==="context"&&h.tag.context instanceof Object){for(f in h.tag.context){this.properties.context[f]=h.tag.context[f]}continue}this.properties[f]=h.tag[f]}}for(f in this.properties.context){this.context[f]=this.properties.context[f]}this.text={x:34,y:15,translating:{x:0,y:0}};this.text.width=this.context.measureText(this.item.label).width;this.text.height=parseInt(this.context.font);this.context.save();if(a.prototype.properties.grid){this.text.translating.x=this.offsetX();this.text.translating.y=this.offsetY()}else{this.text.translating.x=this.translateX();this.text.translating.y=this.translateY()}this.context.translate(this.text.translating.x,this.text.translating.y);this.context.beginPath();this.context.arc(26,20,4,0,Math.PI*2);this.context.moveTo(4,18);this.context.bezierCurveTo(2+g,10+g,8,10,10,14);this.context.bezierCurveTo(13,23,16,17,27,20);this.context.moveTo(2,26);g=this.getRandomFactor();this.context.quadraticCurveTo(2+g,18+g,12,22);this.context.quadraticCurveTo(18,28,27,20);this.context.stroke();this.context.fillText(this.item.label,this.text.x,this.text.y);this.context.restore()};function e(f,g){this.context=f;this.item=g;d.prototype.render.call(this);this.render();d.prototype.line.width+=Math.floor(this.edgeWidth()+this.text.width);d.prototype.count++}e.prototype=new d();e.prototype.render=function(){this.context.save();if(a.prototype.properties.grid){this.context.translate(this.offsetX(),this.offsetY())}else{this.context.translate(this.translateX(),this.translateY())}this.context.beginPath();this.context.arc(32,20,16,0.5*Math.PI,1.5*Math.PI);if(a.prototype.properties.grid){this.context.lineTo(32+d.prototype.properties.width,4);this.context.arc(32+d.prototype.properties.width,20,16,1.5*Math.PI,0.5*Math.PI)}else{this.context.lineTo(32+this.text.width,4);this.context.arc(32+this.text.width,20,16,1.5*Math.PI,0.5*Math.PI)}this.context.closePath();this.context.stroke();this.context.restore()};function c(f,g){this.context=f;this.item=g;d.prototype.render.call(this);this.render();d.prototype.line.width+=Math.floor(16+23+2+this.text.width);d.prototype.count++}c.prototype=new d();c.prototype.render=function(){this.context.save();if(a.prototype.properties.grid){this.context.translate(this.offsetX(),this.offsetY())}else{this.context.translate(this.translateX(),this.translateY())}this.context.beginPath();this.context.moveTo(16,20);this.context.lineTo(23,4);if(a.prototype.properties.grid){this.context.lineTo(23+d.prototype.properties.width,4);this.context.lineTo(23+d.prototype.properties.width,36)}else{this.context.lineTo(16+23+this.text.width,4);this.context.lineTo(16+23+this.text.width,36)}this.context.lineTo(23,36);this.context.closePath();this.context.stroke();this.context.restore()};b.prototype.canvas=new a()})(Webtags);